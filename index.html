<!DOCTYPE html>
<html>

<head>
  <title>Revision App</title>
  <link rel="stylesheet" href="styleslogin.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

</head>

<body>


  <div>
    <form class='user-forms'>
      <label for='Username'>Username</label><br>
      <input type='text' id='Username' username=username><br>
      <label for='Password'>Password</label><br>
      <input type='text' id='Password' password=password><br>

      <button type="button" id='btnSubmit'>Submit</button>


    </form>
  </div>

  <script>

    //The supabase url
    const supabase_url = 'https://pxjndwrkafegopsolnde.supabase.co'
    //Supabase key
    const supabase_key = 'sb_publishable_eOUJ3K3GNczOncszRwYhyA_A1QAw72F'
    //Initialize supabase client
    const supabaseClient = supabase.createClient(
    'https://pxjndwrkafegopsolnde.supabase.co',
    'sb_publishable_eOUJ3K3GNczOncszRwYhyA_A1QAw72F'
    );
    
    
    //Username element 
    let usernameElement = document.getElementById('Username');

    //function to check if username is in database
    async function checkusername() {
      //Fetches from the table username
      //if not found returns not found to the console
      const { data, error } = await supabaseClient
        //Sql query to fetch username
        .from('userinfo')
        .select('username')
        .eq('username', usernameElement.value)
      //If not found then log to the console
      if (error) {
        console.log('username not found')


      }
      //Temporary debugging tool to see if username found this is temporary
      else {
        Console.log('Username found')
      }

    };


    document.addEventListener('DOMContentLoaded', function () {
      //Get the element of the submit button   
      let button = document.getElementById('btnSubmit');
      // Add event listener to the button
      button.addEventListener('click', function () {
        //fetch the data from the username field
        let usernameElement = document.getElementById('Username');
        //log the value of the username form to the console
        console.log(usernameElement.value);
        checkusername()
      });


    });


  </script>
</body>

</html>
